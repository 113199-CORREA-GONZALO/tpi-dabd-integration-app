<app-main-container title="Reportes" (infoButtonClick)="onInfoButtonClick()">
  <div class="row mb-4">
    <div class="d-flex align-items-center gap-3 mb-3">
      <div class="d-flex align-items-center gap-2">
        <span class="text-secondary">Desde:</span>
        <input type="month" [(ngModel)]="filters.firstDate" class="form-control form-control-sm"
               (change)="filterData()">
      </div>
      <div class="d-flex align-items-center gap-2">
        <span class="text-secondary">Hasta:</span>
        <input type="month" [(ngModel)]="filters.lastDate" class="form-control form-control-sm"
               (change)="filterData()">
      </div>
      <button type="button" class="btn btn-outline-info" [ngbPopover]="popContent"
              [autoClose]="'outside'" placement = "bottom" >
        <i class="bi bi-funnel-fill"></i>
      </button>
      <ng-template #popContent>
        <div class="row mb-3">
          <div class="col-4 d-flex align-content-center flex-wrap">
            <span class="text-secondary">Estado:</span>
          </div>
          <div class="col-8">
            <select id="period-type" class="form-select" [(ngModel)]="filters.group" (change)="filterData()">
              <option value="">Todos</option>
              <option value="PAID">Pagado</option>
              <option value="PENDING">Pendiente</option>
              <option value="MONTH">Candelado</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <span class="text-secondary">Forma de pago:</span>
          </div>
          <div class="col-8">
            <select id="visitor-type" class="form-select" [(ngModel)]="filters.type" (change)="filterData()">
              <option value="">Todos</option>
              <option value="TRANSFER">Transferencia</option>
              <option value="MERCADOPAGO">Mercado pago</option>
            </select>
          </div>
        </div>
      </ng-template>
      <div class="d-flex gap-1">
        <button class="btn btn-outline-danger" (click)="resetFilters()">
          <i class="bi bi-trash-fill"></i>
        </button>
      </div>
    </div>
  </div>


  <!-- Grilla del dashboard -->
  <div class="row position-relative min-vh-75">
    <div [ngClass]="">
      <app-main-dashboard [filters]="filters" (notifyParent)="changeMode($event)"></app-main-dashboard>
    </div>
    <div [ngClass]="">
      <app-distribution-payment-methods [filters]="filters" (notifyParent)="changeMode($event)"></app-distribution-payment-methods>
    </div>
    <div [ngClass]="">
      <app-total-payments [filters]="filters" (notifyParent)="changeMode($event)"></app-total-payments>
    </div>
    <!-- <div [ngClass]="">
      <app-types-dashboard [filters]="filters" (notifyParent)="changeMode($event)"></app-types-dashboard>
    </div>
    <div [ngClass]="">
      <app-inconsistencies-dashboard [filters]="filters" (notifyParent)="changeMode($event)"></app-inconsistencies-dashboard>
    </div> -->
  </div>

</app-main-container>


